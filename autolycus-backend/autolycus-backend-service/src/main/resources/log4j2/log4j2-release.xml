<?xml version="1.0" encoding="UTF-8"?>
<Configuration status="ERROR">
    <Properties>
        <Property name="log-home" value="autolycus" />
        <Property name="file-name" value="autolycus-backend" />
        <Property name="pattern" value="%d{yyyy-MM-dd HH:mm:ss.SSS} %-5level - [ %21.21t ] %30.30logger{1.} - %msg%n" />
    </Properties>

    <!--OFF、FATAL、ERROR、WARN、INFO、DEBUG、TRACE、ALL-->
    <Appenders>
        <Console name="console" target="SYSTEM_OUT">
            <ThresholdFilter level="DEBUG" onMatch="ACCEPT" onMismatch="DENY" />
            <PatternLayout pattern="${pattern}"/>
        </Console>

        <RollingRandomAccessFile name="info-file" immediateFlush="false" fileName="${log-home}/${file-name}-info.log"
                                 filePattern="${log-home}/archive/${file-name}-info-%d{yyyy-MM-dd}_%i.log">
            <Filters>
                <ThresholdFilter level="WARN" onMatch="DENY" onMismatch="NEUTRAL" />
                <ThresholdFilter level="DEBUG" onMatch="ACCEPT" onMismatch="DENY" />
            </Filters>
            <PatternLayout pattern="${pattern}" />
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true" />
                <SizeBasedTriggeringPolicy size="10MB" />
            </Policies>
            <DefaultRolloverStrategy max="30" />
        </RollingRandomAccessFile>

        <RollingRandomAccessFile name="error-file" immediateFlush="false" fileName="${log-home}/${file-name}-error.log"
                                 filePattern="${log-home}/archive/${file-name}-error-%d{yyyy-MM-dd}_%i.log">
            <ThresholdFilter level="WARN" onMatch="ACCEPT" onMismatch="DENY" />
            <PatternLayout pattern="${pattern}" />
            <Policies>
                <TimeBasedTriggeringPolicy interval="1" modulate="true" />
                <SizeBasedTriggeringPolicy size="10MB" />
            </Policies>
            <DefaultRolloverStrategy max="100" />
        </RollingRandomAccessFile>

        <Async name="async-info-file">
            <AppenderRef ref="info-file" />
        </Async>

        <Async name="async-error-file">
            <AppenderRef ref="error-file" />
        </Async>

    </Appenders>

    <Loggers>
        <Logger name="com.annwyn.autolycus.mybatis.mapper" level="OFF" />
        <Logger name="com.annwyn.autolycus" level="DEBUG" />
        <Logger name="com.annwyn.hecate" level="DEBUG" />

        <Root level="INFO">
            <appender-ref ref="console" />
            <appender-ref ref="async-info-file" />
            <appender-ref ref="async-error-file" />
        </Root>

    </Loggers>

</Configuration>
